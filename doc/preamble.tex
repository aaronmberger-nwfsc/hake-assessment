% Add header line. \PassOptionsToPackage is used to pass optioins to a package
% that has already been loaded. Bookdown creates code to loads the geometry
% package before this preamble is loaded, so this is needed to add options
% after the fact.
% To include footer line, see \renewcommand{\footrulewidth}
% below, after fancyhdr is loaded
\PassOptionsToPackage{includehead}{geometry}
\usepackage{fancyhdr}
% Make header nd footer the same line width
\renewcommand{\headrulewidth}{0.25pt}
\renewcommand{\footrulewidth}{0.25pt}
\pagestyle{fancy}
\fancyhf{}

% For centering with fixed width column or right cell values in a tabular
% Use 'C' instead of 'c' in latex table code
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
\newcolumntype{C}[1]{>{\PreserveBackslash\centering}p{#1}}
\newcolumntype{R}[1]{>{\PreserveBackslash\raggedleft}p{#1}}
\newcolumntype{L}[1]{>{\PreserveBackslash\raggedright}p{#1}}

% http://tex.stackexchange.com/questions/664/why-should-i-use-usepackaget1fontenc
%\usepackage[T1]{fontenc}

% Math packages
\usepackage{mathptmx}
\usepackage{nccmath}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{bm}

\ifPDFTeX
  \usepackage{lmodern}
\else
  % Lualatex
  \usepackage{fontspec}
  \setsansfont{CMU Sans Serif} % Arial
  \setmainfont{CMU Serif} % Times New Roman
  \setmonofont{CMU Typewriter Text} % Consolas
  % Needed by lualatex to print unicode symbols
  \PassOptionsToPackage{math-style=ISO,bold-style=ISO}{unicode-math}
  % Create an alias for bm->symbf when using lualatex to avoid
  % missing font errors
  \let\bm\symbf
\fi

% For degree symbol
\usepackage{gensymb}

% Don't use eqnarray, it's old and buggy with newer packages
% align is from amsmath package
\newcommand{\eb}{\begin{align}}
\newcommand{\ee}{\end{align}}

% Keep whole paragraph on one page instead of a single line on the next page.
\usepackage[all]{nowidow}

% Font selection, here we use the monospace Bera font
%\usepackage{bera}

% Used to make the headers in tables via the kableExtra::linebreak() function
\usepackage{makecell}
\usepackage{multirow}

% Needed for `H` placement option for plots
\usepackage{float}

% To make a float on its own page appear at the top instead of vertically
% centered. From:
% http://stackoverflow.com/questions/2009420/how-to-put-a-figure-on-the-top-of-a-page-on-its-own-in-latex
\makeatletter
\setlength\@fptop{0pt}
\makeatother

% Caption indentation and style
\usepackage[format = plain,
            indention = 3mm,
            labelsep = period,
            font={small},
            singlelinecheck = false,
            labelfont = bf]{caption}

% Page number in the bottom center of page
\fancyfoot[C]{\thepage}

\newcommand*{\TitleFont}{
      \usefont{\encodingdefault}{\rmdefault}{b}{n}
      \fontsize{20}{24}
      \selectfont}

\usepackage{graphicx}
\usepackage{tocloft}
\setcounter{secnumdepth}{3}

\usepackage[breaklinks=true,bookmarksopen,bookmarksdepth=3]{hyperref}
\hypersetup{
  colorlinks=false,
  plainpages=true,
  linkcolor=black,
  linkbordercolor=blue,
  pdfborderstyle={/S/U/W 1},
  citecolor=black,
  %urlcolor=black,
  pdflang={en-US},
  pdftitle = {Status of the Pacific Hake (whiting) stock in U.S. and Canadian
  waters},
  pdfauthor = {Joint Technical Committee of the Pacific Hake/Whiting Agreement
  \\ Between the Governments of the United States and Canada}
}
% \edef\mypdftitle{\GetDocumentProperties{hyperref/pdftitle}}
% \edef\mypdfauthor{\GetDocumentProperties{hyperref/pdfauthor}}
% \urlstyle{same}

\usepackage{sectsty}

\usepackage{pdflscape}

\fancypagestyle{fancylandscape}{
\fancyhf{} % Clears the header/footer
\fancyfoot{ % Footer
\makebox[\textwidth][r]{ % Right
  \rlap{\hspace{.75cm} % Push out of margin by \footskip
    \smash{ % Remove vertical height
      \raisebox{4.87in}{ % Raise vertically
        \rotatebox{90}{
        \thepage
        }}}}}} % Rotate counter-clockwise
\renewcommand{\headrulewidth}{0pt} % No header rule
\renewcommand{\footrulewidth}{0pt} % No footer rule
}
