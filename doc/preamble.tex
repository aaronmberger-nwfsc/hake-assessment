% Add header line. `\PassOptionsToPackage` is used to pass optioins to
% a package that has already been loaded. Bookdown creates code to loads
% the geometry package before this preamble is loaded, so this is needed to
% add options after the fact. To include footer line, see
% `\renewcommand{\footrulewidth}` below, after fancyhdr is loaded.
\PassOptionsToPackage{includehead}{geometry}

% To see the frames on each page showing margins and text outline areas
% for debugging purposes.
% \usepackage{showframe}
% \renewcommand*\ShowFrameColor{\color{red}}

% Needed for the `\KOMAoptions` calls that are used to change a page from
% portrait to landscape. See the R function
% `hake::post_process_landscape_tables()` which is where it is injected into
% the TEX file
\usepackage[usegeometry]{typearea}


\usepackage{fancyhdr}
% Make header nd footer the same line width
\renewcommand{\headrulewidth}{0.25pt}
\renewcommand{\footrulewidth}{0.25pt}
\pagestyle{fancy}
\fancyhf{}

% For centering with fixed width column or right cell values in a tabular
% Use 'C' instead of 'c' in latex table code
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
\newcolumntype{C}[1]{>{\PreserveBackslash\centering}p{#1}}
\newcolumntype{R}[1]{>{\PreserveBackslash\raggedleft}p{#1}}
\newcolumntype{L}[1]{>{\PreserveBackslash\raggedright}p{#1}}

% http://tex.stackexchange.com/questions/664/why-should-i-use-
% usepackaget1fontenc\usepackage[T1]{fontenc}

% This provides `\sectionfont{}` which we use to make section fonts uppercase
% with this command: `\sectionfont{\makeUpperCase}`
\usepackage{sectsty}

% Provides control over the `\maketitle` command
\usepackage{titling}

% Provides normal numernic numbering for pages
\pagenumbering{arabic}

% Math packages
\usepackage{mathptmx}
\usepackage{nccmath}
\usepackage{amsmath}
\usepackage{amssymb}

% For bold math symbols in equations
\usepackage{bm}

\ifPDFTeX
  % PDFlatex requirements
  \usepackage{lmodern}
\else
  % Lualatex requirements
  \usepackage{fontspec}
  \setsansfont{CMU Sans Serif} % Arial
  \setmainfont{CMU Serif} % Times New Roman
  \setmonofont{CMU Typewriter Text} % Consolas
  % Needed by lualatex to print unicode symbols
  \PassOptionsToPackage{math-style=ISO,bold-style=ISO}{unicode-math}
  % Create an alias for bm->symbf when using lualatex to avoid
  % missing font errors
  \let\bm\symbf
\fi

% For degree symbol
\usepackage{gensymb}

% Don't use `eqnarray`, it's old and buggy when combined with many newer
% packages. `\align` is from `amsmath` package
\newcommand{\eb}{\begin{align}}
\newcommand{\ee}{\end{align}}

% Keep whole paragraph on one page instead of a single line on the next page.
\usepackage[all]{nowidow}

% Used to make the headers in tables via the kableExtra::linebreak() function.
\usepackage{makecell}
% These two commands make the table header cells set up by `linebreaker()`
% have their text closer together vertically. They work inconjunction with
% `\makecell`.
\usepackage{array}
\renewcommand\cellset{\renewcommand\arraystretch{0.5}
\setlength\extrarowheight{1pt}}

% Needed for `H` placement option for plots.
\usepackage{float}

% To make a float on its own page appear at the top instead of vertically
% centered. From: http://stackoverflow.com/questions/2009420/how-to-put-a-
% figure-on-the-top-of-a-page-on-its-own-in-latex
\makeatletter
\setlength\@fptop{0pt}
\makeatother

% Caption indentation and style.
\usepackage[format = plain,
            %justification = justified,
            indention = 3mm,
            labelsep = period,
            font = {small},
            singlelinecheck = false,
            labelfont = bf]{caption}

% Page number in the bottom center of page.
\fancyfoot[C]{\thepage}

% Font settings for the title page.
\newcommand*{\TitleFont}{
      \usefont{\encodingdefault}{\rmdefault}{b}{n}
      \fontsize{20}{24}
      \selectfont}

\usepackage{graphicx}

% For the table of contents, `\secnumdepth` is the depth to show in the table
% of contents (TOC).
\usepackage{tocloft}
\setcounter{secnumdepth}{3}

% Setup hyperlink attributes here.
\usepackage[breaklinks=true,bookmarksopen,bookmarksdepth=3]{hyperref}
\hypersetup{
  colorlinks = false,
  plainpages = true,
  linkcolor = black,
  linkbordercolor = blue,
  pdfborderstyle = {/S/U/W 1},
  citecolor = black,
  %urlcolor = black,
  pdflang = {en-US},
  pdftitle = {Status of the Pacific Hake (whiting) stock in U.S. and Canadian
  waters},
  pdfauthor = {Joint Technical Committee of the Pacific Hake/Whiting Agreement
  \\ Between the Governments of the United States and Canada}
}

% Provides `\landscape`. Unnecessary for compiling after running the post
% processing script (`hake::post_process()`) in R but needed for the
% pre-post-processed build to work without error (during the
% `bookdown::render_book()` call)
\usepackage{pdflscape}

% Makes TeX faster by loading more longtable rows (100) at a time into memory
\setcounter{LTchunksize}{400}

