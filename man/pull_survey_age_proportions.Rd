% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-pull-survey-.R
\name{pull_survey_age_proportions}
\alias{pull_survey_age_proportions}
\title{Calculate age proportions for the acoustic age-2+ survey}
\usage{
pull_survey_age_proportions(
  year = hake::get_data_yr(),
  round = options()$digits,
  dir =
    "//nwcfile/fram/Survey.Acoustics/Survey Time Series Analysis/Historical Summary (for Kriging)/Outputs/Historical Outputs (KS Stratification with aged data)/with extrapolation/"
)
}
\arguments{
\item{year}{An integer specifying the year of interest.
The default uses \code{\link[=get_data_yr]{get_data_yr()}} to get the current year for the data.}

\item{round}{An integer specifying how many digits should be printed.
The default is to print the options for \code{digits} stored in your R session.}

\item{dir}{The directory that stores the age-composition data that have been
extrapolated.}
}
\description{
Calculate age proportions for the acoustic age-2+ survey based on
the estimated \strong{abundance} at age extrapolated to the KS stratifications.
This information is produced by the acoustic team and stored on the
network in the \code{kriged_len_age_abundance_table} file.
The original code to generate these proportions was provided by
Allan Hicks and can be found on GitHub
\url{https://github.com/iantaylor-NOAA/hake-data/blob/master/Rcode/AcousticData2.R}.
Particularly lines 170-174 that explains the file location.
The actual code to compute the compositions is pretty trivial,
the difficulty is knowing what file to use.
As mentioned above, abundance is key here rather than biomass.
}
\examples{
proportions <- pull_survey_age_proportions(
  year = 2021, round = 2
)
# Values to paste into .dat file
glue::glue_collapse(proportions, sep = " ")
}
